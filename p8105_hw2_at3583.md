p8105_hw2_at3583
================
Alexandria D.Taylor,
September 28, 2025

# Problem 1 – FiveThirtyEight

``` r
library(readr)
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ purrr     1.1.0
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
# Import .csv files for FiveThirtyEight datasets
pols_df <- read_csv("data/pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemp_df <- read_csv("data/unemployment.csv")
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df <- read_csv("data/snp.csv")
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
library(tidyverse)
library(dplyr)
library(tidyr)

#clean pols_df using separate
pols_df <- pols_df %>%
separate(mon, into = c("year", "month", "day"), sep ="-") %>%
mutate(across(c(year, month, day), as.integer)) %>%
mutate(
month = month.name[month],
president = ifelse(prez_gop == 1, "gop", "dem")
) %>%
select(-prez_dem, -prez_gop, -day)

#clean snp_df using separate
snp_df <- snp_df %>%
separate(date, into = c("month", "day", "year"), sep = "/") %>%
mutate(across(c(year, month, day), as.integer)) %>%
mutate(month = month.name[month]) %>%
select(year, month, everything(), -day) %>%
arrange(year, month)

#clean unemp_df from wide to longer format using tidy
unemp_df <- unemp_df %>%
pivot_longer(
Jan:Dec,
names_to = "month",
values_to = "unemployment"
) %>%
rename (year = Year) %>%
mutate(
  month = str_to_title(month),
  year = as.integer(year),
  month = month.name[match(str_to_title(month), month.abb)]
)
  
# merge pols, snp and unemp dataframes
merged_df <- pols_df %>%
  left_join(snp_df, by = c("year", "month")) %>%
  left_join(unemp_df, by = c("year", "month"))
```

The `pols_df` dataset contains information on national politicians by
party, including 6 variables on party composition and affiliation of the
sitting president, while the `snp_df` dataset contains monthly closing
values of the S&P stock index, with 787 observations. The
`unemployment_df`dataset reports U.S. unemployment rates by year and
month, tidied to long format with 3 fields. After cleaning and merging
of all three data frames,the resulting datasets contains **822
observations** and **11 variables**, spanning the years **1947 to
2015**. Highlighted variables include `year`, `month`, the `president`
indicator (with values dem, gop), party composition counts such as
`gov_gop`, `sen_gop`, `rep_gop`, the S&P closing index (`close`), and
unemployment rates (`unemployment`).

# Problem 2 – Trash Wheel

``` r
library(readxl)
library(janitor)
```

    ## 
    ## Attaching package: 'janitor'

    ## The following objects are masked from 'package:stats':
    ## 
    ##     chisq.test, fisher.test

``` r
library(dplyr)
library(readr)

# read and clean Mr. Trash Wheel sheet
mr_trash <- read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", skip = 1) %>%
  clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(
    year = as.integer(readr::parse_number(year)),
    sports_balls = as.integer(round(sports_balls, 0)),
    wheel = "Mr. Trash Wheel"
  )
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
# read and clean Professor Trash Wheel sheet
prof_trash <- read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", skip = 1) %>%
  clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(
    year = as.integer(readr::parse_number(as.character(year))),
    wheel = "Professor Trash Wheel")

# read and clean Gwynns Falls Trash Wheel sheet
gwynnda <- read_excel("data/202509 Trash Wheel Collection Data.xlsx", sheet = "Gwynns Falls Trash Wheel", skip = 1) %>%
  clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(
    year = as.integer(readr::parse_number(as.character(year))),
    wheel = "Gwynnda")
```

``` r
# combine dataframes into one tidy dataset
trash_df <- bind_rows(mr_trash, prof_trash, gwynnda)
```

The combined Trash Wheel dataset contains **1188** observations and
**17** variables, collected across **2014** to **2025**. Variables
include collection date (`year`, `month`), volume and weight of trash
collected (`volume_cubic_yards`), (`weight_tons`), and the counts of
items such as `plastic_bottles`, `glass_bottles`, and `cigarette_butts`.
Overall, Professor Trash Wheel has collected a total of **282.26** tons
of trash,while Gwynnda collected **1.812^{4}** cigarette butts in June
2022.

# Problem 3 – Zillow

``` r
library(readr)
library(dplyr)
library(tidyr)
library(janitor)
library(lubridate)

# import Zillow Rent Index (ZORI) dataset
zori <- read_csv("data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") %>%
clean_names()
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
# import Zip Codes dataset
zip_bor <- read_csv("data/Zip Codes.csv") %>%
clean_names()
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
# clean Zillow dataset
zori <- zori %>%
  clean_names() %>%
  rename(zip = region_name)

zori_pivot <- zori %>%
  pivot_longer(
    cols = 10:ncol(.),
    names_to = "date",
    values_to = "rent_index"
  ) %>%
  
# remove "x" from data
  mutate(
    date = str_remove(date, "^x"),
    date = ymd(date),
    year = year(date),
    month = month(date, label = TRUE, abbr = FALSE)
  )
  
# clean Zip Codes dataset 
zip_bor <- zip_bor %>%
  clean_names() %>%
  rename(zip = zip_code) %>%   # step 2: consistent key for joining
  mutate(
    borough = case_when(
      county == "New York" ~ "Manhattan",
      county == "Kings"    ~ "Brooklyn",
      county == "Bronx"    ~ "Bronx",
      county == "Queens"   ~ "Queens",
      county == "Richmond" ~ "Staten Island",
      TRUE ~ county
    )
  )

# combine datasets
zillow_df <- zori_pivot %>%
  left_join(zip_bor, by = "zip", relationship = "many-to-many")
```

The final Zillow dataset contains **17516** observations across **149**
unique ZIP codes and **43** neighborhoods in NYC. A numbnerof ZIP codes
from the borough dataset are not present in the Zillow dataset,
including **10464, 10474, 10475**, which can be indicative of areas with
limited rental activity or incomplete creporting. When comparing January
2021 to January 2020, the ten ZIP codes with the steepest declines in
rental prices, shown below, are mostly concentrated in Manhattan and
Brooklyn, highlight the impact of the COVID-19 pandemic on these
boroughs.

|   zip | borough   | neighborhood                  |     2020 |     2021 |      drop |
|------:|:----------|:------------------------------|---------:|---------:|----------:|
| 10007 | Manhattan | Lower Manhattan               | 6334.211 | 5421.614 | -912.5966 |
| 10069 | Manhattan | NA                            | 4623.042 | 3874.918 | -748.1245 |
| 10009 | Manhattan | Lower East Side               | 3406.442 | 2692.187 | -714.2550 |
| 10016 | Manhattan | Gramercy Park and Murray Hill | 3731.135 | 3019.431 | -711.7045 |
| 10001 | Manhattan | Chelsea and Clinton           | 4108.098 | 3397.648 | -710.4499 |
| 10002 | Manhattan | Lower East Side               | 3645.416 | 2935.113 | -710.3028 |
| 10004 | Manhattan | Lower Manhattan               | 3149.658 | 2443.697 | -705.9608 |
| 10038 | Manhattan | Lower Manhattan               | 3573.201 | 2875.616 | -697.5853 |
| 10012 | Manhattan | Greenwich Village and Soho    | 3628.566 | 2942.344 | -686.2218 |
| 10010 | Manhattan | Gramercy Park and Murray Hill | 3697.284 | 3012.353 | -684.9304 |
